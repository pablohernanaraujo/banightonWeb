"use strict";angular.module("webApp",["ngAnimate","ngCookies","ngMessages","ngResource","ui.router","ngSanitize","ngTouch","firebase"]).constant("fire",{clients:"https://clientsbnoapp.firebaseio.com"}).run(["$rootScope","$location",function(a,b){a.$on("$routeChangeError",function(c,d,e,f){"AUTH_REQUIRED"===f&&(a.message="Sorry, you must log in to access thar page",b.path("/inicio"))})}]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("inicio",{url:"/inicio",templateUrl:"views/inicio.html",controller:"InicioCtrl"}).state("servicios",{url:"/servicios",templateUrl:"views/servicios.html",controller:"ServiciosCtrl"}).state("clientes",{url:"/clientes",templateUrl:"views/clientes.html",controller:"ClientesCtrl"}).state("privado",{url:"/privado",templateUrl:"views/privado.html",controller:"PrivadoCtrl",resolve:{currentAuth:["Authentication",function(a){return a.requireAuth()}]}}),b.otherwise("/inicio")}]),angular.module("webApp").controller("NavCtrl",["$scope","Authentication",function(a,b){a.abrirModal=function(a){"ingresar"===a&&$("#ingresar").openModal(),"menu"===a&&$("#menu").openModal()},a.clientLogin=function(a){b.login(a)},a.clientLogout=function(){b.logout()}}]),angular.module("webApp").controller("InicioCtrl",function(){}),angular.module("webApp").controller("ClientesCtrl",function(){}),angular.module("webApp").controller("ServiciosCtrl",function(){}),angular.module("webApp").controller("PrivadoCtrl",function(){$("#ingresar").closeModal()}),angular.module("webApp").factory("Authentication",["$rootScope","$firebaseAuth","fire","$location","$firebaseObject","$firebaseArray",function(a,b,c,d,e,f){var g=(new Firebase(c.clients+"/clients"),new Firebase(c.clients)),h=b(g);return h.$onAuth(function(b){if(b){var d=new Firebase(c.clients+"/clients/"+b.uid),f=e(d);a.currentUser=f}else a.currentUser=""}),{login:function(b){a.dataLoading=!0,h.$authWithPassword({email:b.email,password:b.password}).then(function(b){d.path("/privado"),a.algo=b.uid,a.dataLoading=!1})["catch"](function(b){a.message=b.message,a.dataLoading=!1})},logout:function(){return d.path("/inicio"),h.$unauth()},requireAuth:function(){return h.$requireAuth()},register:function(b){a.dataLoading=!0,h.$createUser({email:b.email,password:b.password}).then(function(e){new Firebase(c.clients+"/clients").child(e.uid).set({user:{date:Firebase.ServerValue.TIMESTAMP,regUser:e.uid,client:b.client,firstname:b.firstname,lastname:b.lastname,email:b.email,status:"1"}});a.message="Registering "+b.firstname,h.$authWithPassword({email:b.email,password:b.password}).then(function(b){a.dataLoading=!1,d.path("/privado"),a.algo=b.uid})})["catch"](function(b){a.message=b.message})}}}]),angular.module("webApp").run(["$templateCache",function(a){a.put("views/clientes.html","<h3>CLIENTES</h3>"),a.put("views/inicio.html",'<div class="jumbotron"> <h1>\'Allo, \'Allo!</h1> <p class="lead"> <img src="images/yeoman.c582c4d1.png" alt="I\'m Yeoman"><br> Always a pleasure scaffolding your apps. </p> <p><a class="btn btn-lg btn-success" ng-href="#/">Splendid!<span class="glyphicon glyphicon-ok"></span></a></p> </div> <div class="row marketing"> <h4>HTML5 Boilerplate</h4> <p> HTML5 Boilerplate is a professional front-end template for building fast, robust, and adaptable web apps or sites. </p> <h4>Angular</h4> <p> AngularJS is a toolset for building the framework most suited to your application development. </p> <h4>Karma</h4> <p>Spectacular Test Runner for JavaScript.</p> </div>'),a.put("views/privado.html","<p>This is the about view.</p>"),a.put("views/servicios.html","<h2>SERVICIOS</h2>")}]);